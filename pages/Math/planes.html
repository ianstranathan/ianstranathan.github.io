<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../../misc/miscImgs/hello.ico">
    <title>Ian Stranathan</title>
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- CSS -->
    <link rel="stylesheet" href="../../style/style.css">
    
    <!-- Katex -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js" integrity="sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
              // customised options
              // • auto-render specific keys, e.g.:
              delimiters: [
                  {left: '$$', right: '$$', display: true},
                  {left: '$', right: '$', display: false},
                  {left: '\\(', right: '\\)', display: false},
                  {left: '\\[', right: '\\]', display: true}
              ],
              // • rendering keys, e.g.:
              throwOnError : false
            });
        });
    </script>
    <!-- highlightjs -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script defer>hljs.highlightAll();</script>
    <!-- Google Font -->  
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cousine&display=swap" rel="stylesheet"> 
    <!-- FontAwesome -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- My own stuff -->
    <!-- ---------------------------------------------------------------  -->
    <script src="../../scripts/metaStuff.js"></script>
    <script src="../../scripts/header.js" defer></script>
    <script src="../../scripts/about.js" defer></script>
    <!-- Injects table of contents at beginning of each content div -->
    <script src="../../scripts/makeTableOfContents.js" defer></script>
    <!-- Injects page with static pages from metadata -->
    <script src="../../scripts/linkInjection.js" defer></script>
    <script src="../../scripts/latexWorkAround.js" defer></script>
    <script src="../../scripts/footer.js" defer></script>
  
    <!-- ---------------------------------------------------------------  -->
  </head>

  <body>
   
    <div id="header">
    </div>
    
    <div id="content-categories-container">
      
      <div id="content"><h1 id="motivation">Motivation</h1>
<p><em>While watching <a href="https://www.youtube.com/watch?v=pq7dV4sR7lg">Casey Muratori write a raytracer</a> recently, I noticed that he incorrectly characterized the plane equation. So of course I had to do a quick derivation to convince myself</em></p>
<h1 id="planeequationderivation">Plane equation derivation</h1>
<p>From the wiki article:
"In a manner analogous to the way lines in a two-dimensional space are described using a point-slope form for their equations, planes in a three dimensional space have a natural description using a point in the plane and a vector orthogonal to it (the normal vector) to indicate its "inclination".</p>
<p>For a given normal vector: <code class='latexWorkaround'>$\vec{n}$</code><br>
And a vector in the plane: <code class='latexWorkaround'>$\vec{P^{\prime}} - \vec{P}$</code></p>
<p>A plane is defined for all <code class='latexWorkaround'>$\vec{P^{\prime}}$</code> such that their dot product is zero (they're orthogonal to each other)
<code class='latexWorkaround'>$\left( \vec{P^{\prime}} - \vec{P} \right) \cdot \vec{n} = 0$</code></p>
<p>We can easily recover the more familiar implicit form (<code class='latexWorkaround'>$Ax + By + Cz = d$</code>) if we write out the expression in scalar form:</p>
<p><code class='latexWorkaround'>$\vec{n} = \left( A, B, C \right)$</code><br>
<code class='latexWorkaround'>$\vec{P} = \left( a, b, c \right)$</code><br>
<code class='latexWorkaround'>$\vec{P^{\prime}} = \left( x, y, z \right)$</code><br></p>
<p><code class='latexWorkaround'>$ \implies \vec{P^{\prime}} - \vec{P} = \left(x - a, y - b, z - c \right)$</code></p>
<p>And <code class='latexWorkaround'>$\left( \vec{P^{\prime}} - \vec{P} \right) \cdot \vec{n} = 0 = 
\left( A, B, C \right) \cdot \left(x - a, y - b, z - c \right)$</code></p>
<p>Expanding the dot product: <br>
<code class='latexWorkaround'>$\left( A, B, C \right) \cdot \left(x - a, y - b, z - c \right) = A\left(x - a \right) + B\left(y - b \right) +  C\left(z - b \right)$</code></p>
<p>Distributing and collecting constants: <br>
<code class='latexWorkaround'>$A\left(x - a \right) + B\left(y - b \right) +  C\left(z - b \right) = Ax + By + Cz + \left(Aa + Bb + Cc \right) = 0$</code></p>
<p>Rewriting the constant values as a new constant <code class='latexWorkaround'>$-d$</code>:<br>
<code class='latexWorkaround'>$\implies d = Aa + Bb + Cc$</code><br>
(or vectorially: <code class='latexWorkaround'>$\vec{P} \cdot \vec{n}$</code>)</p>
<p><code class='latexWorkaround'>$Ax + By + Cz - d = 0 \implies Ax + By + Cz = d$</code></p>
<h1 id="closestdistancetoaplanefromanarbitrarynoncoplanarpoint">Closest distance to a plane from an arbitrary non-coplanar point:</h1>
<h2 id="problemsetup">Problem setup</h2>
<p>Consider the following diagram:</p>
<div id="center">
    <img src="../../images/math/plane/diagramOne.png">
    <p>Some arbitrary plane with some non-coplanar point Q with the relative position vector 
    <code class='latexWorkaround'>$
        \vec{Q} - \vec{P}  = \vec{QP} 
    $</code>
    drawn in blue
    </p>
</div>
<div id="center">
    <img src="../../images/math/plane/diagramTwo.png">
    <p>The same problem from a different perspective</p>
</div>
<h2 id="viaprojectionofpointontonormal">Via projection of point onto normal:</h2>
<div id="center">
    <img src="../../images/math/plane/diagramOneProj.png">
    <p>The projection length of the relative position vector and the plane normal</p>
</div>
<div id="center">
    <img src="../../images/math/plane/diagramTwoProj.png">
</div>
<p>The dot product of the relative position vector and the normal:</p>
<p><code class='latexWorkaround'>$\vec{QP} = \vec{Q} - \vec{P}$</code> </p>
<p>By definition of the dot product<br>
<code class='latexWorkaround'>$\vec{QP} \cdot \vec{n} = \lvert \lvert \vec{QP} \rvert \rvert \lvert \lvert \vec{n} \rvert \rvert \cos{\theta}$</code></p>
<p><code class='latexWorkaround'>$ \implies \lvert \lvert \vec{QP} \rvert \rvert \cos{\theta} = \frac{\vec{QP} \cdot \vec{n}}{ \lvert \lvert \vec{n} \rvert \rvert}$</code></p>
<h2 id="viarayintersection">Via ray intersection</h2>
<div id="center">
    <img src="../../images/math/plane/diagramOneRay.png">
    <p>
        The first diagram with the ray intersection point 
        <code class='latexWorkaround'>$
            \vec{P}^\prime 
        $</code>
    </p>
</div>
<div id="center">
    <img src="../../images/math/plane/diagramTwoRay.png">
    <p>The same as above but from a different perspective</p>
</div>
<p>The vector equation of a ray (really a line -- we just discard negative scaling values ℓ for the ray): <br>
<code class='latexWorkaround'>$\vec{ray} = \vec{r_0} + ℓ \vec{rd}$</code></p>
<p>Where <code class='latexWorkaround'>$\vec{rd}$</code> is a unit vector in the ray direction.</p>
<p>In the case of the ray intersection with the plane, the ray direction is the negative unit vector of whatever the normal vector happens to be; the ray origin is our arbitrary non-coplanar point <code class='latexWorkaround'>$Q$</code></p>
<p><code class='latexWorkaround'>$\vec{rd} = \frac{\vec{n}}{\lvert \lvert \vec{n} \rvert \rvert}$</code>
<code class='latexWorkaround'>$\vec{r_0} = \vec{Q}$</code></p>
<p>Substituting this into the plane equation:</p>
<p><code class='latexWorkaround'>$\left( \vec{Q} - ℓ \frac{\vec{n}}{\lvert \lvert \vec{n} \rvert \rvert} - \vec{P} \right) \cdot \vec{n} = 0$</code></p>
<p>Solving for ℓ:
(Rearranging and using properties of the dot product (distributive &amp; <code class='latexWorkaround'>$\vec{a} \cdot \vec{a} = {\lvert \lvert \vec{a} \rvert \rvert}^2$</code>))</p>
<p><code class='latexWorkaround'>$\left(\vec{Q} - \vec{P} \right) \cdot \vec{n} - ℓ \frac{\vec{n}}{\lvert \lvert \vec{n} \rvert \rvert} \cdot \vec{n} = 0$</code></p>
<p><code class='latexWorkaround'>$\left(\vec{Q} - \vec{P} \right) \cdot \vec{n} - ℓ \frac{{\lvert \lvert \vec{n} \rvert \rvert}^2}{\lvert \lvert \vec{n} \rvert \rvert} = 0$</code></p>
<p><code class='latexWorkaround'>$\vec{QP} \cdot \vec{n} - ℓ \lvert \lvert \vec{n} \rvert \rvert = 0$</code></p>
<p><code class='latexWorkaround'>$ℓ = \frac{\vec{QP} \cdot \vec{n}}{\lvert \lvert \vec{n} \rvert \rvert}$</code></p>
<h2 id="visualconfirmationwith3dgraphingsoftwaregeogebra">Visual confirmation with 3D graphing software (Geogebra):</h2>
<p>Arbitrarily picking a simple example, let the plane be <code class='latexWorkaround'>$x + y + z = 4$</code></p>
<p>Thus, the normal vector is <code class='latexWorkaround'>$\left( 1, 1, 1 \right)$</code> and the "<code class='latexWorkaround'>$d$</code>" value is <code class='latexWorkaround'>$4$</code></p>
<div id="center">
    <img src="../../images/math/plane/geogebra1.png">
    <p>Vector along the normal to plane that is scaled to the derived length</p>
</div>
<div id="center">
    <img src="../../images/math/plane/geogebra2.png">
    <p>Vector along the normal to plane that is scaled to the the "<code class='latexWorkaround'>$d$</code>" length, in this case 4</p>
</div>
<h1 id="wrappingup">Wrapping up:</h1>
<p>Casey's idea that the "<code class='latexWorkaround'>$d$</code>" value generally represents distance along the plane's normal is incorrect.
Fortunately, it doesn't really matter as you don't need to know this in order to implement the simple intersection check for a plane.</p>
<p>All said and done, this is definitely all unnecessary minutia on some level, but it fits the spirit of the handmade ethos hopefully.</p>
<p>Now, if only I knew half of what Casey does or could program a significantly smaller fraction as well as him… guess it's back to work.</p>
<p>Cheers</p>
      </div>
      
      <div id="categories">
      </div>
      
    </div>
  
  </body>
<html>

