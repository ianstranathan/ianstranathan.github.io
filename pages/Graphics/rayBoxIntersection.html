<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- CSS -->
    <link rel="stylesheet" href="../../style/style.css">
    
    <!-- Katex -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js" integrity="sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
              // customised options
              // • auto-render specific keys, e.g.:
              delimiters: [
                  {left: '$$', right: '$$', display: true},
                  {left: '$', right: '$', display: false},
                  {left: '\\(', right: '\\)', display: false},
                  {left: '\\[', right: '\\]', display: true}
              ],
              // • rendering keys, e.g.:
              throwOnError : false
            });
        });
    </script>
    <!-- highlightjs -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script defer>hljs.highlightAll();</script>
    <!-- Google Font -->  
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cousine&display=swap" rel="stylesheet"> 
    <!-- FontAwesome -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- My own stuff -->
    <!-- ---------------------------------------------------------------  -->
    <script src="../../scripts/metaStuff.js"></script>
    <script src="../../scripts/header.js" defer></script>
    <script src="../../scripts/about.js" defer></script>
    <!-- Injects table of contents at beginning of each content div -->
    <script src="../../scripts/makeTableOfContents.js" defer></script>
    <!-- Injects page with static pages from metadata -->
    <script src="../../scripts/linkInjection.js" defer></script>
    <script src="../../scripts/latexWorkAround.js" defer></script>
    <script src="../../scripts/footer.js" defer></script>
  
    <!-- ---------------------------------------------------------------  -->
  </head>

  <body>
   
    <div id="header">
    </div>
    
    <div id="content-categories-container">
      
      <div id="content"><p><em>Derivation of the slab method for an axis aligned box - ray intersection.</em></p>
<h1 id="demos">Demos:</h1>
<p>TL; DR:</p>
<p>2D live demo <a href="../../demos/rayBoxIntersection/2D/index.html">here</a></p>
<p>3D live demo <a href="../../demos/rayBoxIntersection/3D/index.html">here</a></p>
<h1 id="derivation">Derivation</h1>
<p>Recall the vector equation of a line (ray)</p>
<p><code class='latexWorkaround'>$ \vec{r} = \vec{ro} + t \vec{rd} $</code></p>
<p>Such that <code class='latexWorkaround'>$\vec{ro}$</code> is the ray origin &amp; <code class='latexWorkaround'>$\vec{rd}$</code> is the normalized direction of the ray</p>
<p>Written componenet-wise:</p>
<p><code class='latexWorkaround'>$
r_x = {ro}_x + t {rd}_x
$</code>
<code class='latexWorkaround'>$
r_y = {ro}_y + t {rd}_y
$</code>
<code class='latexWorkaround'>$
r_z = {ro}_z + t {rd}_z
$</code></p>
<p>A length for our ray parameter (t) can be found for each intersection with the planes generated by the vertices' positions
by equating the 1D component equations</p>
<!-- ![Intersection length parameter values example](../../images/aabbRayIntersection/Aabb3.png) -->
<div id="center">
    <img src="../../images/aabbRayIntersection/Aabb3.png">
    <p>Intersection length parameter values example</p>
</div>
<pre><code class="C language-C">float t_ax = (aBox.A[0] - aRay.ro[0]) / aRay.rd[0]
float t_ay = (aBox.A[1] - aRay.ro[1]) / aRay.rd[1]
float t_az = (aBox.A[2] - aRay.ro[2]) / aRay.rd[2]
float t_bx = (aBox.B[0] - aRay.ro[0]) / aRay.rd[0]
float t_by = (aBox.B[1] - aRay.ro[1]) / aRay.rd[1]
float t_bz = (aBox.B[2] - aRay.ro[2]) / aRay.rd[2]
</code></pre>
<p>The key observation is to realize that there can only be an intersection if the t-intervals overlap
It's also necessary to take into account the divergent cases where the denominator <code class='latexWorkaround'>$\rightarrow 0$</code></p>
<p>I'll save you the convoluted code I wrote to do this personally and let you play around with the visualizations
I made to convince yourself.</p>
<p>For more performant code, check out Andrew Kensler's on Peter's Shirley's raytracing tutorial.</p>
<h1 id="resources">Resources:</h1>
<ul>
<li><p><a href="http://www.realtimerendering.com/intersections.html">Exhaustive list</a> of resources for object intersections collected by the guys from real time rendering:</p></li>
<li><p><a href="https://raytracing.github.io/books/RayTracingTheNextWeek.html#boundingvolumehierarchies/axis-alignedboundingboxes(aabbs">Peter Shirley, the man, the myth, the legend</a> ( &amp; Andrew Kensler at Pixar)</p></li>
<li><p><a href="http://www.codercorner.com/RayAABB.cpp">Here</a> is some old school C code from "Graphics Gems".</p></li>
</ul>
      </div>
      
      <div id="categories">
      </div>
      
    </div>
  
  </body>
<html>

